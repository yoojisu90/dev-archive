# ğŸ“… ìº˜ë¦°ë” ì‹œìŠ¤í…œ ì™„ì „ ì •ë¦¬

> ì‹ë¬¼ ë†ì¥ ì•±ì˜ ì¼ì • ê´€ë¦¬ ë° ì¼ê¸° ì‘ì„± ì‹œìŠ¤í…œì— ëŒ€í•œ ì™„ì „í•œ ê°€ì´ë“œ

---

## ğŸ“‹ ëª©ì°¨

1. [ì‹œìŠ¤í…œ ê°œìš”](#-ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì•„í‚¤í…ì²˜](#-ì•„í‚¤í…ì²˜)
3. [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
4. [ì»´í¬ë„ŒíŠ¸ ë¶„ì„](#-ì»´í¬ë„ŒíŠ¸-ë¶„ì„)
5. [API ì„œë¹„ìŠ¤](#-api-ì„œë¹„ìŠ¤)
6. [ë°ì´í„° íë¦„](#-ë°ì´í„°-íë¦„)
7. [ì‘ì—… íˆìŠ¤í† ë¦¬](#-ì‘ì—…-íˆìŠ¤í† ë¦¬)
8. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
9. [í–¥í›„ ê°œì„ ì‚¬í•­](#-í–¥í›„-ê°œì„ ì‚¬í•­)

---

## ğŸ¯ ì‹œìŠ¤í…œ ê°œìš”

### ê¸°ëŠ¥ ìš”ì•½
- **ë¬¼ì£¼ê¸° ì¼ì • ê´€ë¦¬**: ì‹ë¬¼ë³„ ë¬¼ì£¼ê¸° ì¼ì • ë“±ë¡, ì£¼ê¸°ì  ë°˜ë³µ ì„¤ì •
- **ë†ì‚¬ ì¼ê¸° ì‘ì„±**: ë‚ ì§œë³„ ì¼ê¸° ì‘ì„±, ë‚ ì”¨ ê¸°ë¡
- **ìº˜ë¦°ë” ì‹œê°í™”**: ì›”ë³„ ìº˜ë¦°ë” ë·°, ì¼ì • ì  í‘œì‹œ
- **ê³µíœ´ì¼ í‘œì‹œ**: í•œêµ­ ê³µíœ´ì¼ ìë™ í‘œì‹œ ë° ê°•ì¡°
- **ì‚­ì œ ê¸°ëŠ¥**: ì¼ì • ë° ì¼ê¸° ì‚­ì œ (í™•ì¸ ì•Œë¦¼ í¬í•¨)

### ì£¼ìš” íŠ¹ì§•
| íŠ¹ì§• | ì„¤ëª… | ì•„ì´ì½˜ |
|------|------|--------|
| **ë¬¼ì£¼ê¸° ì¼ì •** | ì‹ë¬¼ë³„ ë°˜ë³µ ì¼ì • ì„¤ì • | ğŸ’§ |
| **ë†ì‚¬ ì¼ê¸°** | ë‚ ì§œë³„ ì¼ê¸° ë° ë‚ ì”¨ ê¸°ë¡ | ğŸ“ |
| **ê³µíœ´ì¼ í‘œì‹œ** | í•œêµ­ ê³µíœ´ì¼ ìë™ ë§ˆí‚¹ | ğŸ‰ |
| **ì‹œê°ì  í‘œì‹œ** | ë‚ ì§œë³„ ì (dot) ìƒ‰ìƒ êµ¬ë¶„ | ğŸ”µğŸŸ¡ |
| **ê°„í¸ ì‚­ì œ** | ì›í„°ì¹˜ ì‚­ì œ (í™•ì¸ ëŒ€í™”ìƒì) | ğŸ—‘ï¸ |

### ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬
```json
{
  "react-native-calendars": "^1.1306.0",  // ìº˜ë¦°ë” UI
  "date-holidays": "^3.23.12"              // ê³µíœ´ì¼ ë°ì´í„°
}
```

---

## ğŸ— ì•„í‚¤í…ì²˜

### ì‹œìŠ¤í…œ êµ¬ì„±ë„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Calendar.jsx      â”‚
â”‚  (ìº˜ë¦°ë” ë©”ì¸ í™”ë©´)  â”‚
â”‚                     â”‚
â”‚  - ìº˜ë¦°ë” ë Œë”ë§     â”‚
â”‚  - ì¼ì • í‘œì‹œ         â”‚
â”‚  - ëª¨ë‹¬ ê´€ë¦¬         â”‚
â”‚  - ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ import
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ calendarService.js  â”‚
â”‚   (API í†µì‹  ë ˆì´ì–´)  â”‚
â”‚                     â”‚
â”‚  - ë¬¼ì£¼ê¸° CRUD      â”‚
â”‚  - ì¼ê¸° CRUD        â”‚
â”‚  - ì—ëŸ¬ ì²˜ë¦¬        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ HTTP
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Spring Boot API    â”‚â—€â”€â”€â”€â”€â”€â–¶â”‚   MariaDB    â”‚
â”‚  192.168.30.107     â”‚       â”‚              â”‚
â”‚                     â”‚       â”‚ - watering   â”‚
â”‚  - /watering/*      â”‚       â”‚ - diary      â”‚
â”‚  - /diaries/*       â”‚       â”‚ - member     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
```sql
-- ë¬¼ì£¼ê¸° ì¼ì • í…Œì´ë¸”
CREATE TABLE watering (
  WATERING_ID INT PRIMARY KEY AUTO_INCREMENT,
  MEM_ID VARCHAR(20) NOT NULL,
  PLANT_NAME VARCHAR(50) NOT NULL,
  WATERING_DATE DATE NOT NULL,
  CYCLE_DAY INT NOT NULL,
  CREATED_AT DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (MEM_ID) REFERENCES member(MEM_ID)
);

-- ì¼ê¸° í…Œì´ë¸”
CREATE TABLE diary (
  DIARY_ID INT PRIMARY KEY AUTO_INCREMENT,
  MEM_ID VARCHAR(20) NOT NULL,
  DIARY_TITLE VARCHAR(100) NOT NULL,
  DIARY_CONTENT TEXT,
  DIARY_DATE DATE NOT NULL,
  WEATHER VARCHAR(20),
  CREATED_AT DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (MEM_ID) REFERENCES member(MEM_ID)
);
```

---

## âš¡ ì£¼ìš” ê¸°ëŠ¥

### 1. ë¬¼ì£¼ê¸° ì¼ì • ë“±ë¡
**ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤**:
1. ìº˜ë¦°ë”ì—ì„œ ë‚ ì§œ ì„ íƒ
2. "ğŸ’§ ë¬¼ì£¼ê¸°" ë²„íŠ¼ í´ë¦­
3. ì‹ë¬¼ ì´ë¦„, ì£¼ê¸°(ì¼), íšŸìˆ˜ ì…ë ¥
4. ìë™ìœ¼ë¡œ ì£¼ê¸°ë³„ ì¼ì • ìƒì„±

**ì˜ˆì‹œ**:
```
ì‹ë¬¼ ì´ë¦„: í† ë§ˆí† 
ì£¼ê¸°: 3ì¼
íšŸìˆ˜: 10íšŒ
ì‹œì‘ì¼: 2025-10-29

â†’ ìƒì„±ë˜ëŠ” ì¼ì •:
  2025-10-29 (1ì°¨)
  2025-11-01 (2ì°¨, +3ì¼)
  2025-11-04 (3ì°¨, +3ì¼)
  ...
  2025-11-26 (10ì°¨)
```

**ì½”ë“œ íë¦„**:
```javascript
// 1. ì‚¬ìš©ì ì…ë ¥
const wateringData = {
  plantName: 'í† ë§ˆí† ',
  cycle: '3',
  count: '10'
};

// 2. ë‚ ì§œ ê³„ì‚° ë° ë°˜ë³µ ë“±ë¡
for (let i = 0; i < count; i++) {
  const eventDate = new Date(startDate);
  eventDate.setDate(startDate.getDate() + i * cycle);
  const dateString = eventDate.toISOString().split('T')[0];
  
  await apiAddWatering(memId, {
    plantName: wateringData.plantName,
    date: dateString,
    cycle: cycle,
  });
}

// 3. ìº˜ë¦°ë” ìƒˆë¡œê³ ì¹¨
await loadWateringSchedules();
```

---

### 2. ë†ì‚¬ ì¼ê¸° ì‘ì„±
**ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤**:
1. ìº˜ë¦°ë”ì—ì„œ ë‚ ì§œ ì„ íƒ
2. "ğŸ“ ì¼ê¸°ì“°ê¸°" ë²„íŠ¼ í´ë¦­
3. ì œëª©, ë‚´ìš©, ë‚ ì”¨ ì„ íƒ ì…ë ¥
4. ì¼ê¸° ì €ì¥

**ë‚ ì”¨ ì˜µì…˜**:
- â˜€ï¸ ë§‘ìŒ
- â˜ï¸ íë¦¼
- ğŸŒ§ï¸ ë¹„
- â›ˆï¸ í­ìš°
- â„ï¸ ëˆˆ

**ì½”ë“œ íë¦„**:
```javascript
// 1. ì‚¬ìš©ì ì…ë ¥
const diaryData = {
  title: 'í† ë§ˆí†  ì²« ìˆ˜í™•',
  content: 'ì˜¤ëŠ˜ ë“œë””ì–´ ì²« í† ë§ˆí† ë¥¼ ìˆ˜í™•í–ˆë‹¤. ì •ë§ ë¿Œë“¯í•˜ë‹¤!',
  weather: 'ë§‘ìŒ',
  date: '2025-10-29'
};

// 2. API í˜¸ì¶œ
await apiAddDiary(memId, {
  title: diaryData.title,
  content: diaryData.content,
  weather: diaryData.weather,
  date: selectedDate,
});

// 3. ìº˜ë¦°ë” ìƒˆë¡œê³ ì¹¨
await loadDiaries();
```

---

### 3. ê³µíœ´ì¼ ìë™ í‘œì‹œ
**ë¼ì´ë¸ŒëŸ¬ë¦¬**: `date-holidays`

**ê¸°ëŠ¥**:
- í•œêµ­ ê³µíœ´ì¼ ìë™ ë¡œë“œ (ì‹ ì •, ì„¤ë‚ , ì¶”ì„, ì–´ë¦°ì´ë‚  ë“±)
- ê³µíœ´ì¼ ë‚ ì§œëŠ” ë¹¨ê°„ìƒ‰ ë°°ê²½ + ë¹¨ê°„ìƒ‰ í…ìŠ¤íŠ¸
- ê³µíœ´ì¼ ì (dot) í‘œì‹œ

**ì½”ë“œ**:
```javascript
import HolidaysLib from 'date-holidays';
const Holidays = HolidaysLib.default ?? HolidaysLib;

const loadHolidays = () => {
  try {
    const hd = new Holidays('KR'); // í•œêµ­
    const currentYear = new Date().getFullYear();
    const list = hd.getHolidays(currentYear);
    
    const holidayMarks = {};
    list.forEach((holiday) => {
      const d = new Date(holiday.date);
      const dateString = d.toISOString().slice(0, 10);
      
      holidayMarks[dateString] = {
        marked: true,
        dotColor: '#FF6B6B',
        customStyles: {
          container: { backgroundColor: '#FF6B6B20' },
          text: { color: '#FF6B6B', fontWeight: 'bold' },
        },
      };
    });
    
    setMarkedDates((prev) => ({ ...prev, ...holidayMarks }));
  } catch (e) {
    console.warn('ê³µíœ´ì¼ ë¡œë“œ ì‹¤íŒ¨:', e);
  }
};
```

**ì§€ì› ê³µíœ´ì¼ ì˜ˆì‹œ**:
```
ğŸ“… 2025ë…„ ê³µíœ´ì¼
- 1ì›” 1ì¼: ì‹ ì •
- 1ì›” 28-30ì¼: ì„¤ë‚  ì—°íœ´
- 3ì›” 1ì¼: ì‚¼ì¼ì ˆ
- 5ì›” 5ì¼: ì–´ë¦°ì´ë‚ 
- 6ì›” 6ì¼: í˜„ì¶©ì¼
- 8ì›” 15ì¼: ê´‘ë³µì ˆ
- 10ì›” 3ì¼: ê°œì²œì ˆ
- 10ì›” 6-8ì¼: ì¶”ì„ ì—°íœ´
- 10ì›” 9ì¼: í•œê¸€ë‚ 
- 12ì›” 25ì¼: í¬ë¦¬ìŠ¤ë§ˆìŠ¤
```

---

### 4. ì‚­ì œ ê¸°ëŠ¥
**íŠ¹ì§•**:
- í™•ì¸ ëŒ€í™”ìƒìë¡œ ì‹¤ìˆ˜ ë°©ì§€
- ì‚­ì œ í›„ ìë™ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
- ì„±ê³µ/ì‹¤íŒ¨ ì•Œë¦¼ í‘œì‹œ

**ë¬¼ì£¼ê¸° ì¼ì • ì‚­ì œ**:
```javascript
const handleDeleteWatering = async (wateringId) => {
  Alert.alert(
    'ì‚­ì œ í™•ì¸',
    'ì´ ë¬¼ì£¼ê¸° ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
    [
      { text: 'ì·¨ì†Œ', style: 'cancel' },
      {
        text: 'ì‚­ì œ',
        style: 'destructive',
        onPress: async () => {
          try {
            await deleteWateringSchedule(wateringId);
            Alert.alert('ì„±ê³µ', 'ë¬¼ì£¼ê¸° ì¼ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            await loadAllData();
          } catch (error) {
            Alert.alert('ì˜¤ë¥˜', 'ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
          }
        },
      },
    ]
  );
};
```

**ì¼ê¸° ì‚­ì œ**:
```javascript
const handleDeleteDiary = async (diaryId) => {
  Alert.alert(
    'ì‚­ì œ í™•ì¸',
    'ì´ ì¼ê¸°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
    [
      { text: 'ì·¨ì†Œ', style: 'cancel' },
      {
        text: 'ì‚­ì œ',
        style: 'destructive',
        onPress: async () => {
          try {
            await deleteDiary(diaryId);
            Alert.alert('ì„±ê³µ', 'ì¼ê¸°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            await loadAllData();
          } catch (error) {
            Alert.alert('ì˜¤ë¥˜', 'ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
          }
        },
      },
    ]
  );
};
```

---

## ğŸ“¦ ì»´í¬ë„ŒíŠ¸ ë¶„ì„

### Calendar.jsx êµ¬ì¡°
> ğŸ“ ê²½ë¡œ: `components/myFarm/Calendar.jsx`

#### State ê´€ë¦¬
```javascript
const [selectedDate, setSelectedDate] = useState('');      // ì„ íƒëœ ë‚ ì§œ
const [markedDates, setMarkedDates] = useState({});        // ë§ˆí‚¹ëœ ë‚ ì§œë“¤
const [events, setEvents] = useState([]);                  // ëª¨ë“  ì¼ì •
const [modalVisible, setModalVisible] = useState(false);   // ë¬¼ì£¼ê¸° ëª¨ë‹¬
const [diaryModalVisible, setDiaryModalVisible] = useState(false); // ì¼ê¸° ëª¨ë‹¬
const [loading, setLoading] = useState(true);              // ë¡œë”© ìƒíƒœ

const [wateringData, setWateringData] = useState({        // ë¬¼ì£¼ê¸° ì…ë ¥ í¼
  plantName: '',
  cycle: '7',
  count: '4',
});

const [diaryData, setDiaryData] = useState({              // ì¼ê¸° ì…ë ¥ í¼
  title: '',
  content: '',
  weather: 'ë§‘ìŒ',
});

const memId = 'user1'; // TODO: ë¡œê·¸ì¸ ì—°ë™
```

#### í•µì‹¬ í•¨ìˆ˜ë“¤

**1. loadAllData() - ì „ì²´ ë°ì´í„° ë¡œë“œ**
```javascript
const loadAllData = async () => {
  try {
    setLoading(true);
    await Promise.all([
      loadWateringSchedules(),
      loadDiaries()
    ]);
  } catch (error) {
    console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
    Alert.alert('ì˜¤ë¥˜', 'ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
  } finally {
    setLoading(false);
  }
};
```

**2. loadWateringSchedules() - ë¬¼ì£¼ê¸° ì¼ì • ë¡œë“œ**
```javascript
const loadWateringSchedules = async () => {
  try {
    const waterings = await fetchWateringSchedules(memId);
    const wateringEvents = (waterings ?? []).map((w) => ({
      id: w.wateringId,
      type: 'watering',
      date: w.wateringDate,        // YYYY-MM-DD
      plantName: w.plantName,
      cycle: w.cycleDay,
    }));
    
    updateEventsAndMarkers(wateringEvents, 'watering');
  } catch (error) {
    console.error('ë¬¼ì£¼ê¸° ì¼ì • ë¡œë“œ ì‹¤íŒ¨:', error);
  }
};
```

**3. loadDiaries() - ì¼ê¸° ë¡œë“œ**
```javascript
const loadDiaries = async () => {
  try {
    const diaries = await fetchDiaries(memId);
    const diaryEvents = (diaries ?? []).map((d) => ({
      id: d.diaryId,
      type: 'diary',
      date: d.diaryDate,           // YYYY-MM-DD
      title: d.diaryTitle,
      content: d.diaryContent,
      weather: d.weather ?? 'ë§‘ìŒ',
    }));
    
    updateEventsAndMarkers(diaryEvents, 'diary');
  } catch (error) {
    console.error('ì¼ê¸° ë¡œë“œ ì‹¤íŒ¨:', error);
  }
};
```

**4. updateEventsAndMarkers() - ì´ë²¤íŠ¸ ë° ë§ˆì»¤ ì—…ë°ì´íŠ¸**
```javascript
const updateEventsAndMarkers = (newEvents, type) => {
  // ê¸°ì¡´ ì´ë²¤íŠ¸ì—ì„œ í•´ë‹¹ íƒ€ì…ë§Œ ì œê±° í›„ ìƒˆ ì´ë²¤íŠ¸ ì¶”ê°€
  setEvents((prev) => {
    const filtered = prev.filter((e) => e.type !== type);
    return [...filtered, ...newEvents];
  });
  
  // ë§ˆì»¤ ì—…ë°ì´íŠ¸
  const newMarked = {};
  newEvents.forEach((event) => {
    newMarked[event.date] = {
      ...(markedDates[event.date] ?? {}),
      marked: true,
      dotColor: type === 'watering' ? COLORS.primary : '#FFD700',
    };
  });
  
  setMarkedDates((prev) => ({ ...prev, ...newMarked }));
};
```

**5. onDayPress() - ë‚ ì§œ ì„ íƒ**
```javascript
const onDayPress = (day) => {
  setSelectedDate(day.dateString); // YYYY-MM-DD
};
```

**6. addWateringSchedule() - ë¬¼ì£¼ê¸° ì¼ì • ì¶”ê°€**
```javascript
const addWateringSchedule = async () => {
  if (!wateringData.plantName) {
    Alert.alert('ì•Œë¦¼', 'ì‹ë¬¼ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    return;
  }
  
  try {
    const cycle = parseInt(wateringData.cycle, 10);
    const count = parseInt(wateringData.count, 10);
    const startDate = new Date(selectedDate);
    
    // ì£¼ê¸°ë³„ ë°˜ë³µ ë“±ë¡
    for (let i = 0; i < count; i++) {
      const eventDate = new Date(startDate);
      eventDate.setDate(startDate.getDate() + i * cycle);
      const dateString = eventDate.toISOString().split('T')[0];
      
      await apiAddWatering(memId, {
        plantName: wateringData.plantName,
        date: dateString,
        cycle: cycle,
      });
    }
    
    await loadWateringSchedules();
    setModalVisible(false);
    setWateringData({ plantName: '', cycle: '7', count: '4' });
    Alert.alert('ì„±ê³µ', 'ë¬¼ì£¼ê¸° ì¼ì •ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
  } catch (error) {
    Alert.alert('ì˜¤ë¥˜', 'ë¬¼ì£¼ê¸° ì¼ì • ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
  }
};
```

**7. addDiary() - ì¼ê¸° ì‘ì„±**
```javascript
const addDiary = async () => {
  if (!diaryData.title || !diaryData.content) {
    Alert.alert('ì•Œë¦¼', 'ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    return;
  }
  
  try {
    await apiAddDiary(memId, {
      title: diaryData.title,
      content: diaryData.content,
      weather: diaryData.weather,
      date: selectedDate,
    });
    
    await loadDiaries();
    setDiaryModalVisible(false);
    setDiaryData({ title: '', content: '', weather: 'ë§‘ìŒ' });
    Alert.alert('ì„±ê³µ', 'ì¼ê¸°ê°€ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.');
  } catch (error) {
    Alert.alert('ì˜¤ë¥˜', 'ì¼ê¸° ì‘ì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
  }
};
```

#### UI êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“… ë†ì‚¬ ìº˜ë¦°ë”                        â”‚
â”‚  ë¬¼ì£¼ê¸°ì™€ ì¼ê¸°ë¥¼ ê¸°ë¡í•˜ì„¸ìš”             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    2025ë…„ 10ì›”                  â”‚ â”‚
â”‚  â”‚  ì¼ ì›” í™” ìˆ˜ ëª© ê¸ˆ í†            â”‚ â”‚
â”‚  â”‚      1  2  3  4  5  6           â”‚ â”‚
â”‚  â”‚  7  8  9 10 11 12 13           â”‚ â”‚
â”‚  â”‚ 14 15 16 17 18 19 20           â”‚ â”‚
â”‚  â”‚ 21 22 23 24 25 26 27           â”‚ â”‚
â”‚  â”‚ 28 29â€¢30 31                    â”‚ â”‚ 
â”‚  â”‚         â†‘                       â”‚ â”‚
â”‚  â”‚     ì„ íƒëœ ë‚ ì§œ                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“… 2025-10-29                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ğŸ’§ ë¬¼ì£¼ê¸°   â”‚ ğŸ“ ì¼ê¸°ì“°ê¸° â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì´ë‚ ì˜ ì¼ì •                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ’§ ë¬¼ì£¼ê¸°          [ğŸ—‘ï¸]     â”‚     â”‚
â”‚  â”‚ í† ë§ˆí†                        â”‚     â”‚
â”‚  â”‚ ì£¼ê¸°: 3ì¼                    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ“ ì¼ê¸°             [ğŸ—‘ï¸]     â”‚     â”‚
â”‚  â”‚ í† ë§ˆí†  ì²« ìˆ˜í™•               â”‚     â”‚
â”‚  â”‚ ë‚ ì”¨: â˜€ï¸ ë§‘ìŒ               â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ìº˜ë¦°ë” ì»¤ìŠ¤í„°ë§ˆì´ì§•
```javascript
<RNCalendar
  markingType="custom"
  onDayPress={onDayPress}
  markedDates={{
    ...markedDates,
    ...(selectedDate
      ? {
          [selectedDate]: {
            ...(markedDates[selectedDate] ?? {}),
            selected: true,
            selectedColor: COLORS.primary,
          },
        }
      : {}),
  }}
  theme={{
    selectedDayBackgroundColor: COLORS.primary,
    todayTextColor: COLORS.primary,
    dotColor: COLORS.primary,
    arrowColor: COLORS.primary,
    monthTextColor: COLORS.text,
    textMonthFontSize: 18,
    textMonthFontWeight: 'bold',
  }}
  dayComponent={({ date, state, marking }) => {
    // ì»¤ìŠ¤í…€ ë‚ ì§œ ë Œë”ë§
    const weekday = new Date(date.dateString).getDay();
    const isSunday = weekday === 0;
    const isSaturday = weekday === 6;
    
    let textColor = '#2d4150';
    if (state === 'disabled') textColor = '#d9e1e8';
    else if (state === 'today') textColor = COLORS.primary;
    else if (marking?.textColor) textColor = marking.textColor; // ê³µíœ´ì¼
    else if (isSunday) textColor = '#FF6B6B';
    else if (isSaturday) textColor = '#4285F4';
    
    return (
      <TouchableOpacity onPress={() => onDayPress(date)}>
        {marking?.marked && (
          <View style={styles.dot} />
        )}
        <Text style={{ color: textColor }}>{date.day}</Text>
      </TouchableOpacity>
    );
  }}
/>
```

---

## ğŸ”Œ API ì„œë¹„ìŠ¤

### calendarService.js
> ğŸ“ ê²½ë¡œ: `services/calendarService.js`

#### API ì—”ë“œí¬ì¸íŠ¸
```javascript
const API_BASE_URL = 'http://192.168.30.107:8080';
// ë˜ëŠ” 'http://192.168.30.97:8080'
```

#### 1. addWateringSchedule() - ë¬¼ì£¼ê¸° ì¼ì • ì¶”ê°€
```javascript
export const addWateringSchedule = async (memId, wateringData) => {
  try {
    const response = await fetch(`${API_BASE_URL}/watering`, {
      method: 'POST',
      headers: { 
        'Content-Type': 'application/json',
        'Accept': 'application/json'
      },
      body: JSON.stringify({
        memId,
        plantName: wateringData.plantName,
        wateringDate: wateringData.date,
        cycleDay: wateringData.cycle,
      }),
    });
    
    const text = await response.text();
    
    if (!response.ok) {
      // ì—ëŸ¬ ë©”ì‹œì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§•
      let errorMsg = 'ë¬¼ì£¼ê¸° ì¼ì • ì¶”ê°€ ì‹¤íŒ¨';
      
      if (text.includes('foreign key constraint fails')) {
        errorMsg = 'âš ï¸ ë¡œê·¸ì¸ì´ í•„ìš”í•˜ê±°ë‚˜ ì‚¬ìš©ì ì •ë³´ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
      } else if (text.includes('Duplicate entry')) {
        errorMsg = 'âš ï¸ ì´ë¯¸ ê°™ì€ ì¼ì •ì´ ì¡´ì¬í•©ë‹ˆë‹¤.';
      } else if (response.status === 409) {
        errorMsg = 'âš ï¸ ë°ì´í„° ì¶©ëŒì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
      } else if (response.status === 400) {
        errorMsg = 'âš ï¸ ì…ë ¥ ë°ì´í„°ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.';
      }
      
      throw new Error(errorMsg);
    }
    
    // JSON íŒŒì‹± ì‹œë„, ì‹¤íŒ¨í•˜ë©´ í…ìŠ¤íŠ¸ ê·¸ëŒ€ë¡œ ë°˜í™˜
    try {
      return JSON.parse(text);
    } catch (parseError) {
      return { success: true, message: text };
    }
  } catch (error) {
    throw error;
  }
};
```

**ìš”ì²­ ì˜ˆì‹œ**:
```json
POST /watering
{
  "memId": "user1",
  "plantName": "í† ë§ˆí† ",
  "wateringDate": "2025-10-29",
  "cycleDay": 3
}
```

**ì‘ë‹µ ì˜ˆì‹œ (ì„±ê³µ)**:
```json
{
  "success": true,
  "wateringId": 123,
  "message": "ë¬¼ì£¼ê¸° ì¼ì •ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

**ì‘ë‹µ ì˜ˆì‹œ (ì‹¤íŒ¨ - ì™¸ë˜í‚¤ ì˜¤ë¥˜)**:
```
âš ï¸ ë¡œê·¸ì¸ì´ í•„ìš”í•˜ê±°ë‚˜ ì‚¬ìš©ì ì •ë³´ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
```

#### 2. fetchWateringSchedules() - ë¬¼ì£¼ê¸° ì¼ì • ì¡°íšŒ
```javascript
export const fetchWateringSchedules = async (memId) => {
  const response = await fetch(`${API_BASE_URL}/watering?memId=${memId}`);
  if (!response.ok) throw new Error('ë¬¼ì£¼ê¸° ì¼ì • ì¡°íšŒ ì‹¤íŒ¨');
  return await response.json();
};
```

**ìš”ì²­ ì˜ˆì‹œ**:
```
GET /watering?memId=user1
```

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
[
  {
    "wateringId": 123,
    "memId": "user1",
    "plantName": "í† ë§ˆí† ",
    "wateringDate": "2025-10-29",
    "cycleDay": 3,
    "createdAt": "2025-10-25T10:30:00"
  },
  {
    "wateringId": 124,
    "memId": "user1",
    "plantName": "ìƒì¶”",
    "wateringDate": "2025-10-30",
    "cycleDay": 7,
    "createdAt": "2025-10-25T11:00:00"
  }
]
```

#### 3. deleteWateringSchedule() - ë¬¼ì£¼ê¸° ì¼ì • ì‚­ì œ
```javascript
export const deleteWateringSchedule = async (wateringId) => {
  const response = await fetch(`${API_BASE_URL}/watering/${wateringId}`, {
    method: 'DELETE',
  });
  
  const text = await response.text();
  
  if (!response.ok) throw new Error('ë¬¼ì£¼ê¸° ì¼ì • ì‚­ì œ ì‹¤íŒ¨');
  
  try {
    return JSON.parse(text);
  } catch (parseError) {
    return { success: true, message: text };
  }
};
```

**ìš”ì²­ ì˜ˆì‹œ**:
```
DELETE /watering/123
```

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
{
  "success": true,
  "message": "ë¬¼ì£¼ê¸° ì¼ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

#### 4. addDiary() - ì¼ê¸° ì‘ì„±
```javascript
export const addDiary = async (memId, diaryData) => {
  try {
    const response = await fetch(`${API_BASE_URL}/diaries`, {
      method: 'POST',
      headers: { 
        'Content-Type': 'application/json',
        'Accept': 'application/json'
      },
      body: JSON.stringify({
        memId,
        diaryTitle: diaryData.title,
        diaryContent: `ë‚ ì”¨: ${diaryData.weather}\n\n${diaryData.content}`,
        diaryDate: diaryData.date,
      }),
    });
    
    const text = await response.text();
    
    if (!response.ok) {
      let errorMsg = 'ì¼ê¸° ì‘ì„± ì‹¤íŒ¨';
      
      if (text.includes('foreign key constraint fails')) {
        errorMsg = 'âš ï¸ ë¡œê·¸ì¸ì´ í•„ìš”í•˜ê±°ë‚˜ ì‚¬ìš©ì ì •ë³´ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
      } else if (text.includes('Duplicate entry')) {
        errorMsg = 'âš ï¸ ì´ë¯¸ ê°™ì€ ë‚ ì§œì— ì¼ê¸°ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.';
      } else if (response.status === 409) {
        errorMsg = 'âš ï¸ ë°ì´í„° ì¶©ëŒì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
      } else if (response.status === 400) {
        errorMsg = 'âš ï¸ ì…ë ¥ ë°ì´í„°ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.';
      }
      
      throw new Error(errorMsg);
    }
    
    try {
      return JSON.parse(text);
    } catch (parseError) {
      return { success: true, message: text };
    }
  } catch (error) {
    throw error;
  }
};
```

**ìš”ì²­ ì˜ˆì‹œ**:
```json
POST /diaries
{
  "memId": "user1",
  "diaryTitle": "í† ë§ˆí†  ì²« ìˆ˜í™•",
  "diaryContent": "ë‚ ì”¨: ë§‘ìŒ\n\nì˜¤ëŠ˜ ë“œë””ì–´ ì²« í† ë§ˆí† ë¥¼ ìˆ˜í™•í–ˆë‹¤!",
  "diaryDate": "2025-10-29"
}
```

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
{
  "success": true,
  "diaryId": 456,
  "message": "ì¼ê¸°ê°€ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

#### 5. fetchDiaries() - ì¼ê¸° ì¡°íšŒ
```javascript
export const fetchDiaries = async (memId) => {
  const response = await fetch(`${API_BASE_URL}/diaries?memId=${memId}`);
  if (!response.ok) throw new Error('ì¼ê¸° ì¡°íšŒ ì‹¤íŒ¨');
  return await response.json();
};
```

**ìš”ì²­ ì˜ˆì‹œ**:
```
GET /diaries?memId=user1
```

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
[
  {
    "diaryId": 456,
    "memId": "user1",
    "diaryTitle": "í† ë§ˆí†  ì²« ìˆ˜í™•",
    "diaryContent": "ë‚ ì”¨: ë§‘ìŒ\n\nì˜¤ëŠ˜ ë“œë””ì–´ ì²« í† ë§ˆí† ë¥¼ ìˆ˜í™•í–ˆë‹¤!",
    "diaryDate": "2025-10-29",
    "weather": "ë§‘ìŒ",
    "createdAt": "2025-10-29T15:30:00"
  }
]
```

#### 6. deleteDiary() - ì¼ê¸° ì‚­ì œ
```javascript
export const deleteDiary = async (diaryId) => {
  const response = await fetch(`${API_BASE_URL}/diaries/${diaryId}`, {
    method: 'DELETE',
  });
  
  const text = await response.text();
  
  if (!response.ok) throw new Error('ì¼ê¸° ì‚­ì œ ì‹¤íŒ¨');
  
  try {
    return JSON.parse(text);
  } catch (parseError) {
    return { success: true, message: text };
  }
};
```

**ìš”ì²­ ì˜ˆì‹œ**:
```
DELETE /diaries/456
```

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
{
  "success": true,
  "message": "ì¼ê¸°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

---

## ğŸ”„ ë°ì´í„° íë¦„

### ë¬¼ì£¼ê¸° ì¼ì • ë“±ë¡ íë¦„
```
ì‚¬ìš©ì ì•¡ì…˜
    â”‚
    â–¼
1. ë‚ ì§œ ì„ íƒ (onDayPress)
    â”‚
    â–¼
2. "ğŸ’§ ë¬¼ì£¼ê¸°" ë²„íŠ¼ í´ë¦­
    â”‚
    â–¼
3. ëª¨ë‹¬ í‘œì‹œ (setModalVisible(true))
    â”‚
    â–¼
4. ì‹ë¬¼ ì´ë¦„, ì£¼ê¸°, íšŸìˆ˜ ì…ë ¥
    â”‚
    â–¼
5. "ì¶”ê°€" ë²„íŠ¼ í´ë¦­ (addWateringSchedule)
    â”‚
    â”œâ”€â†’ for ë£¨í”„ë¡œ ì—¬ëŸ¬ ì¼ì • ìƒì„±
    â”‚   â”‚
    â”‚   â”œâ”€â†’ ë‚ ì§œ ê³„ì‚° (startDate + i * cycle)
    â”‚   â”‚
    â”‚   â””â”€â†’ apiAddWatering í˜¸ì¶œ
    â”‚       â”‚
    â”‚       â””â”€â†’ POST /watering
    â”‚
    â–¼
6. loadWateringSchedules() í˜¸ì¶œ
    â”‚
    â”œâ”€â†’ fetchWateringSchedules(memId)
    â”‚   â”‚
    â”‚   â””â”€â†’ GET /watering?memId=user1
    â”‚
    â–¼
7. updateEventsAndMarkers()
    â”‚
    â”œâ”€â†’ setEvents (ì´ë²¤íŠ¸ ë°°ì—´ ì—…ë°ì´íŠ¸)
    â”‚
    â””â”€â†’ setMarkedDates (ë§ˆì»¤ ì—…ë°ì´íŠ¸)
    â”‚
    â–¼
8. ìº˜ë¦°ë” ì¬ë Œë”ë§
    â”‚
    â””â”€â†’ ë‚ ì§œì— íŒŒë€ìƒ‰ ì  í‘œì‹œ ğŸ’§
```

### ì¼ê¸° ì‘ì„± íë¦„
```
ì‚¬ìš©ì ì•¡ì…˜
    â”‚
    â–¼
1. ë‚ ì§œ ì„ íƒ (onDayPress)
    â”‚
    â–¼
2. "ğŸ“ ì¼ê¸°ì“°ê¸°" ë²„íŠ¼ í´ë¦­
    â”‚
    â–¼
3. ëª¨ë‹¬ í‘œì‹œ (setDiaryModalVisible(true))
    â”‚
    â–¼
4. ì œëª©, ë‚´ìš©, ë‚ ì”¨ ì…ë ¥
    â”‚
    â–¼
5. "ì €ì¥" ë²„íŠ¼ í´ë¦­ (addDiary)
    â”‚
    â””â”€â†’ apiAddDiary í˜¸ì¶œ
        â”‚
        â””â”€â†’ POST /diaries
    â”‚
    â–¼
6. loadDiaries() í˜¸ì¶œ
    â”‚
    â”œâ”€â†’ fetchDiaries(memId)
    â”‚   â”‚
    â”‚   â””â”€â†’ GET /diaries?memId=user1
    â”‚
    â–¼
7. updateEventsAndMarkers()
    â”‚
    â”œâ”€â†’ setEvents (ì´ë²¤íŠ¸ ë°°ì—´ ì—…ë°ì´íŠ¸)
    â”‚
    â””â”€â†’ setMarkedDates (ë§ˆì»¤ ì—…ë°ì´íŠ¸)
    â”‚
    â–¼
8. ìº˜ë¦°ë” ì¬ë Œë”ë§
    â”‚
    â””â”€â†’ ë‚ ì§œì— ë…¸ë€ìƒ‰ ì  í‘œì‹œ ğŸ“
```

### ì‚­ì œ íë¦„
```
ì‚¬ìš©ì ì•¡ì…˜
    â”‚
    â–¼
1. ì¼ì • ì¹´ë“œì˜ ğŸ—‘ï¸ ë²„íŠ¼ í´ë¦­
    â”‚
    â–¼
2. Alert.alert í™•ì¸ ëŒ€í™”ìƒì í‘œì‹œ
    â”‚
    â”œâ”€â†’ "ì·¨ì†Œ" í´ë¦­ â†’ ì¢…ë£Œ
    â”‚
    â””â”€â†’ "ì‚­ì œ" í´ë¦­
        â”‚
        â–¼
3. API í˜¸ì¶œ
    â”‚
    â”œâ”€â†’ ë¬¼ì£¼ê¸°: deleteWateringSchedule(wateringId)
    â”‚   â”‚
    â”‚   â””â”€â†’ DELETE /watering/{id}
    â”‚
    â””â”€â†’ ì¼ê¸°: deleteDiary(diaryId)
        â”‚
        â””â”€â†’ DELETE /diaries/{id}
    â”‚
    â–¼
4. loadAllData() í˜¸ì¶œ
    â”‚
    â”œâ”€â†’ loadWateringSchedules()
    â”‚
    â””â”€â†’ loadDiaries()
    â”‚
    â–¼
5. ìº˜ë¦°ë” ì¬ë Œë”ë§
    â”‚
    â””â”€â†’ ì‚­ì œëœ ì¼ì •ì˜ ì  ì œê±°
```

---

## ğŸ›  ì‘ì—… íˆìŠ¤í† ë¦¬

### Phase 1: ìº˜ë¦°ë” ê¸°ë³¸ êµ¬ì¡° êµ¬í˜„ âœ…
**ì‘ì—… ë‚´ìš©**:
- `react-native-calendars` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
- ê¸°ë³¸ ìº˜ë¦°ë” UI êµ¬í˜„
- ë‚ ì§œ ì„ íƒ ê¸°ëŠ¥

**ì½”ë“œ**:
```javascript
import { Calendar } from 'react-native-calendars';

<Calendar
  onDayPress={(day) => {
    setSelectedDate(day.dateString);
  }}
  markedDates={{
    [selectedDate]: { selected: true, selectedColor: '#00adf5' }
  }}
/>
```

---

### Phase 2: ë¬¼ì£¼ê¸° ì¼ì • ê¸°ëŠ¥ êµ¬í˜„ âœ…
**ì‘ì—… ë‚´ìš©**:
- ë¬¼ì£¼ê¸° ì¼ì • ëª¨ë‹¬ UI
- ë°˜ë³µ ì¼ì • ìƒì„± ë¡œì§
- API ì—°ë™

**ì£¼ìš” ê¸°ëŠ¥**:
```javascript
// ì£¼ê¸°ë³„ ë°˜ë³µ ì¼ì • ìƒì„±
for (let i = 0; i < count; i++) {
  const eventDate = new Date(startDate);
  eventDate.setDate(startDate.getDate() + i * cycle);
  const dateString = eventDate.toISOString().split('T')[0];
  
  await apiAddWatering(memId, {
    plantName: wateringData.plantName,
    date: dateString,
    cycle: cycle,
  });
}
```

---

### Phase 3: ì¼ê¸° ì‘ì„± ê¸°ëŠ¥ êµ¬í˜„ âœ…
**ì‘ì—… ë‚´ìš©**:
- ì¼ê¸° ì‘ì„± ëª¨ë‹¬ UI
- ë‚ ì”¨ ì„ íƒ ê¸°ëŠ¥
- API ì—°ë™

**ë‚ ì”¨ ì˜µì…˜**:
```javascript
const weatherOptions = ['ë§‘ìŒ', 'íë¦¼', 'ë¹„', 'í­ìš°', 'ëˆˆ'];
```

---

### Phase 4: ê³µíœ´ì¼ í‘œì‹œ ê¸°ëŠ¥ âœ…
**ì‘ì—… ë‚´ìš©**:
- `date-holidays` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
- í•œêµ­ ê³µíœ´ì¼ ë¡œë“œ
- ê³µíœ´ì¼ ìŠ¤íƒ€ì¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•

**íŠ¹ì§•**:
- ë¹¨ê°„ìƒ‰ ë°°ê²½ + ë¹¨ê°„ìƒ‰ í…ìŠ¤íŠ¸
- ê³µíœ´ì¼ ì  í‘œì‹œ
- ESM/CJS í˜¸í™˜ ì²˜ë¦¬

---

### Phase 5: JSON Parse ì—ëŸ¬ ì²˜ë¦¬ âœ…
**ë¬¸ì œ**: ì„œë²„ê°€ ì„±ê³µ ì‹œ JSONì´ ì•„ë‹Œ í…ìŠ¤íŠ¸ ì‘ë‹µ ë°˜í™˜

**ì›ì¸**:
```javascript
// ì„œë²„ ì‘ë‹µ
"ì¼ê¸°ê°€ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤."  // â† JSONì´ ì•„ë‹˜!
```

**í•´ê²°**:
```javascript
const text = await response.text();

if (!response.ok) {
  throw new Error(`ì‘ì„± ì‹¤íŒ¨: ${text}`);
}

// JSON íŒŒì‹± ì‹œë„, ì‹¤íŒ¨í•˜ë©´ í…ìŠ¤íŠ¸ ê·¸ëŒ€ë¡œ ë°˜í™˜
try {
  return JSON.parse(text);
} catch (parseError) {
  return { success: true, message: text };
}
```

---

### Phase 6: ì™¸ë˜í‚¤ ì—ëŸ¬ ì²˜ë¦¬ âœ…
**ë¬¸ì œ**: `memId='user1'`ì´ member í…Œì´ë¸”ì— ì—†ì–´ì„œ ì™¸ë˜í‚¤ ì œì•½ ìœ„ë°˜

**í•´ê²°**: ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€
```javascript
if (text.includes('foreign key constraint fails')) {
  errorMsg = 'âš ï¸ ë¡œê·¸ì¸ì´ í•„ìš”í•˜ê±°ë‚˜ ì‚¬ìš©ì ì •ë³´ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
}
```

---

### Phase 7: ì‚­ì œ ê¸°ëŠ¥ ì¶”ê°€ âœ…
**ì‘ì—… ë‚´ìš©**:
- ì‚­ì œ ë²„íŠ¼ UI ì¶”ê°€ (ğŸ—‘ï¸)
- í™•ì¸ ëŒ€í™”ìƒì ì¶”ê°€
- ì‚­ì œ API ì—°ë™
- ì‚­ì œ í›„ ìë™ ìƒˆë¡œê³ ì¹¨

**UI**:
```jsx
<TouchableOpacity
  style={styles.deleteButton}
  onPress={() => handleDeleteWatering(event.id)}>
  <Text style={styles.deleteButtonText}>ğŸ—‘ï¸</Text>
</TouchableOpacity>
```

---

### Phase 8: Import ì˜¤ë¥˜ ìˆ˜ì • âœ…
**ë¬¸ì œ**: ì‚­ì œ ê¸°ëŠ¥ êµ¬í˜„ í›„ import ë¬¸ì—ì„œ í•¨ìˆ˜ê°€ ëˆ„ë½ë¨

**í•´ê²°**:
```javascript
import {
  addDiary as apiAddDiary,
  addWateringSchedule as apiAddWatering,
  deleteDiary,                    // âœ… ì¶”ê°€
  deleteWateringSchedule,         // âœ… ì¶”ê°€
  fetchDiaries,
  fetchWateringSchedules
} from '../../services/calendarService';
```

---

## ğŸ”¥ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: ìº˜ë¦°ë” ë‚ ì§œ ìƒ‰ìƒì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŒ

**ì¦ìƒ**:
- ì¼ìš”ì¼ì´ ë¹¨ê°„ìƒ‰ì´ ì•„ë‹˜
- í† ìš”ì¼ì´ íŒŒë€ìƒ‰ì´ ì•„ë‹˜

**ì›ì¸**:
- `date.day` (ìˆ«ì)ë¡œ ìš”ì¼ ê³„ì‚° â†’ ì˜ëª»ëœ ê²°ê³¼
- `date.dateString` (YYYY-MM-DD)ë¡œ ê³„ì‚°í•´ì•¼ ì •í™•

**í•´ê²°**:
```javascript
// âŒ ì˜ëª»ëœ ë°©ë²•
const weekday = date.day % 7; // ë‚ ì§œë¡œ ìš”ì¼ ê³„ì‚° ë¶ˆê°€

// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
const weekday = new Date(date.dateString).getDay(); // 0=ì¼, 6=í† 
```

---

### ë¬¸ì œ 2: ê³µíœ´ì¼ ë¡œë“œ ì‹¤íŒ¨

**ì¦ìƒ**:
- ì•±ì´ í¬ë˜ì‹œë¨
- "Cannot read property 'date' of undefined" ì˜¤ë¥˜

**ì›ì¸**:
- `date-holidays` ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ESM/CJS í˜¸í™˜ ë¬¸ì œ
- `holiday.date`ê°€ ë¬¸ìì—´/Date íƒ€ì… í˜¼ìš©

**í•´ê²°**:
```javascript
// ESM/CJS í˜¸í™˜ import
import HolidaysLib from 'date-holidays';
const Holidays = HolidaysLib.default ?? HolidaysLib;

// ë‚ ì§œ ì•ˆì „ ì²˜ë¦¬
const d = holiday?.date instanceof Date
  ? holiday.date
  : new Date(String(holiday?.date ?? '').split(' ')[0] || '');

if (!isNaN(d)) {
  const dateString = d.toISOString().slice(0, 10);
  // ...
}
```

---

### ë¬¸ì œ 3: ë¬¼ì£¼ê¸° ì¼ì • ì¤‘ë³µ ë“±ë¡

**ì¦ìƒ**:
- ê°™ì€ ì‹ë¬¼, ê°™ì€ ë‚ ì§œì— ì—¬ëŸ¬ ì¼ì • ë“±ë¡ë¨

**ì›ì¸**:
- DBì— UNIQUE ì œì•½ ì¡°ê±´ ì—†ìŒ
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì¤‘ë³µ ê²€ì‚¬ ì•ˆ í•¨

**í•´ê²°**:

1. **ë°±ì—”ë“œ (ì¶”ì²œ)**:
```sql
ALTER TABLE watering 
ADD UNIQUE KEY unique_watering (MEM_ID, PLANT_NAME, WATERING_DATE);
```

2. **í”„ë¡ íŠ¸ì—”ë“œ**:
```javascript
const addWateringSchedule = async () => {
  // ê¸°ì¡´ ì¼ì • í™•ì¸
  const existingEvents = events.filter(
    e => e.type === 'watering' && 
         e.plantName === wateringData.plantName &&
         e.date === selectedDate
  );
  
  if (existingEvents.length > 0) {
    Alert.alert('ì•Œë¦¼', 'ì´ë¯¸ ê°™ì€ ì¼ì •ì´ ì¡´ì¬í•©ë‹ˆë‹¤.');
    return;
  }
  
  // ì¼ì • ì¶”ê°€
  // ...
};
```

---

### ë¬¸ì œ 4: ì¼ê¸° ë‚ ì§œê°€ ì„ íƒí•œ ë‚ ì§œì™€ ë‹¤ë¦„

**ì¦ìƒ**:
- 10ì›” 29ì¼ì„ ì„ íƒí–ˆëŠ”ë° 10ì›” 28ì¼ë¡œ ì €ì¥ë¨

**ì›ì¸**:
- íƒ€ì„ì¡´ ë¬¸ì œ
- `new Date()`ëŠ” ë¡œì»¬ ì‹œê°„, `toISOString()`ì€ UTC ì‹œê°„

**í•´ê²°**:
```javascript
// âŒ ì˜ëª»ëœ ë°©ë²•
const dateString = new Date(selectedDate).toISOString().split('T')[0];
// UTC ë³€í™˜ìœ¼ë¡œ í•˜ë£¨ ì°¨ì´ ë°œìƒ ê°€ëŠ¥

// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
const dateString = selectedDate; // ì´ë¯¸ YYYY-MM-DD í˜•ì‹
```

---

### ë¬¸ì œ 5: ì‚­ì œ í›„ ìº˜ë¦°ë”ê°€ ì—…ë°ì´íŠ¸ ì•ˆ ë¨

**ì¦ìƒ**:
- ì¼ì •ì„ ì‚­ì œí–ˆëŠ”ë° ì ì´ ì‚¬ë¼ì§€ì§€ ì•ŠìŒ

**ì›ì¸**:
- `loadAllData()` í˜¸ì¶œ ì•ˆ í•¨
- ë˜ëŠ” `updateEventsAndMarkers()` ë¡œì§ ì˜¤ë¥˜

**í•´ê²°**:
```javascript
const handleDeleteWatering = async (wateringId) => {
  // ...
  try {
    await deleteWateringSchedule(wateringId);
    await loadAllData(); // âœ… ë°˜ë“œì‹œ í˜¸ì¶œ
    Alert.alert('ì„±ê³µ', 'ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
  } catch (error) {
    Alert.alert('ì˜¤ë¥˜', 'ì‚­ì œ ì‹¤íŒ¨');
  }
};
```

---

## ğŸš€ í–¥í›„ ê°œì„ ì‚¬í•­

### 1. ì¼ì • ìˆ˜ì • ê¸°ëŠ¥
**í˜„ì¬**: ìƒì„±ê³¼ ì‚­ì œë§Œ ê°€ëŠ¥

**ê°œì„ **:
- ì¼ì • ì¹´ë“œ í´ë¦­ â†’ ìˆ˜ì • ëª¨ë‹¬
- ì‹ë¬¼ ì´ë¦„, ì£¼ê¸° ë³€ê²½ ê°€ëŠ¥
- ì¼ê¸° ì œëª©, ë‚´ìš©, ë‚ ì”¨ ìˆ˜ì • ê°€ëŠ¥

**êµ¬í˜„ ì˜ˆì‹œ**:
```javascript
const [editingEvent, setEditingEvent] = useState(null);

const handleEditWatering = (event) => {
  setEditingEvent(event);
  setWateringData({
    plantName: event.plantName,
    cycle: event.cycle,
    count: '1',
  });
  setModalVisible(true);
};

const updateWateringSchedule = async () => {
  await fetch(`${API_BASE_URL}/watering/${editingEvent.id}`, {
    method: 'PUT',
    body: JSON.stringify(wateringData),
  });
  
  await loadAllData();
};
```

---

### 2. ì¼ê¸° ìƒì„¸ë³´ê¸°
**í˜„ì¬**: ì¼ê¸° ë‚´ìš©ì´ ì˜ë¦¼

**ê°œì„ **:
- ì¼ê¸° ì¹´ë“œ í´ë¦­ â†’ ì „ì²´ ë‚´ìš© ëª¨ë‹¬
- ì‚¬ì§„ ì²¨ë¶€ ê¸°ëŠ¥
- ë§ˆí¬ë‹¤ìš´ ì§€ì›

**UI ì˜ˆì‹œ**:
```jsx
<Modal visible={detailModalVisible}>
  <ScrollView>
    <Text style={styles.title}>{diary.title}</Text>
    <Text style={styles.date}>{diary.date}</Text>
    <Text style={styles.weather}>ë‚ ì”¨: {diary.weather}</Text>
    <Text style={styles.content}>{diary.content}</Text>
    {diary.photos?.map(photo => (
      <Image key={photo.id} source={{ uri: photo.url }} />
    ))}
  </ScrollView>
</Modal>
```

---

### 3. ì•Œë¦¼ ê¸°ëŠ¥
**ëª©í‘œ**:
- ë¬¼ì£¼ê¸° ì¼ì • ë‹¹ì¼ ì•„ì¹¨ ì•Œë¦¼
- ë¬¼ì£¼ê¸° 1ì¼ ì „ ì‚¬ì „ ì•Œë¦¼
- ì¼ê¸° ë¯¸ì‘ì„± ì‹œ ì €ë… ì•Œë¦¼

**êµ¬í˜„ ë°©ì•ˆ**:
```javascript
import * as Notifications from 'expo-notifications';

const scheduleWateringNotification = async (wateringDate, plantName) => {
  await Notifications.scheduleNotificationAsync({
    content: {
      title: 'ğŸ’§ ë¬¼ì£¼ê¸° ì•Œë¦¼',
      body: `ì˜¤ëŠ˜ì€ ${plantName}ì—ê²Œ ë¬¼ì„ ì¤„ ë‚ ì…ë‹ˆë‹¤!`,
    },
    trigger: {
      date: new Date(wateringDate + 'T09:00:00'),
    },
  });
};
```

---

### 4. í†µê³„ ë° ë¶„ì„
**ëª©í‘œ**:
- ì›”ë³„ ë¬¼ì£¼ê¸° íšŸìˆ˜ ì°¨íŠ¸
- ì‹ë¬¼ë³„ ë¬¼ì£¼ê¸° ë¹ˆë„
- ì¼ê¸° ì‘ì„± í†µê³„
- ë‚ ì”¨ë³„ ì„±ì¥ ê¸°ë¡

**ë¼ì´ë¸ŒëŸ¬ë¦¬**:
```bash
npm install react-native-chart-kit
```

**êµ¬í˜„ ì˜ˆì‹œ**:
```jsx
import { BarChart } from 'react-native-chart-kit';

<BarChart
  data={{
    labels: ['í† ë§ˆí† ', 'ìƒì¶”', 'ê³ ì¶”', 'ì˜¤ì´'],
    datasets: [{
      data: [12, 8, 15, 10] // ì›”ë³„ ë¬¼ì£¼ê¸° íšŸìˆ˜
    }]
  }}
  width={screenWidth}
  height={220}
  chartConfig={{
    backgroundColor: '#ffffff',
    decimalPlaces: 0,
  }}
/>
```

---

### 5. ê³µìœ  ê¸°ëŠ¥
**ëª©í‘œ**:
- ì¼ê¸° SNS ê³µìœ 
- ë†ì‚¬ ê¸°ë¡ PDF ë‚´ë³´ë‚´ê¸°
- ì¹œêµ¬ì™€ ì¼ì • ê³µìœ 

**êµ¬í˜„**:
```javascript
import * as Sharing from 'expo-sharing';
import * as Print from 'expo-print';

const exportDiaryPDF = async () => {
  const html = `
    <html>
      <body>
        <h1>${diary.title}</h1>
        <p>ë‚ ì§œ: ${diary.date}</p>
        <p>ë‚ ì”¨: ${diary.weather}</p>
        <p>${diary.content}</p>
      </body>
    </html>
  `;
  
  const { uri } = await Print.printToFileAsync({ html });
  await Sharing.shareAsync(uri);
};
```

---

### 6. ì˜¤í”„ë¼ì¸ ì§€ì›
**ëª©í‘œ**:
- ë„¤íŠ¸ì›Œí¬ ì—†ì´ë„ ì¼ì • ì¡°íšŒ
- ì˜¤í”„ë¼ì¸ ì¼ê¸° ì‘ì„± â†’ ì˜¨ë¼ì¸ ì‹œ ë™ê¸°í™”

**êµ¬í˜„**:
```javascript
import AsyncStorage from '@react-native-async-storage/async-storage';

const loadDiariesWithCache = async () => {
  try {
    // ë„¤íŠ¸ì›Œí¬ ì‹œë„
    const diaries = await fetchDiaries(memId);
    await AsyncStorage.setItem('diaries', JSON.stringify(diaries));
    return diaries;
  } catch (error) {
    // ë„¤íŠ¸ì›Œí¬ ì‹¤íŒ¨ ì‹œ ìºì‹œ ì‚¬ìš©
    const cached = await AsyncStorage.getItem('diaries');
    return cached ? JSON.parse(cached) : [];
  }
};
```

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¬¸ì„œ
- react-native-calendars: https://github.com/wix/react-native-calendars
- date-holidays: https://github.com/commenthol/date-holidays

### API ë¬¸ì„œ
- Spring Boot REST API: http://192.168.30.107:8080/swagger-ui.html

### ê´€ë ¨ íŒŒì¼
```
ğŸ“ components/myFarm/
  â””â”€â”€ Calendar.jsx              # ìº˜ë¦°ë” ë©”ì¸ í™”ë©´

ğŸ“ services/
  â””â”€â”€ calendarService.js        # ìº˜ë¦°ë” API í†µì‹ 

ğŸ“ constants/
  â””â”€â”€ myFarmConstant.js         # ìƒ‰ìƒ/ìŠ¤íƒ€ì¼ ìƒìˆ˜
```

### ìƒ‰ìƒ ê°€ì´ë“œ
```javascript
export const COLORS = {
  primary: '#4CAF50',      // ì´ˆë¡ìƒ‰ (ë¬¼ì£¼ê¸°)
  secondary: '#FFD700',    // ë…¸ë€ìƒ‰ (ì¼ê¸°)
  holiday: '#FF6B6B',      // ë¹¨ê°„ìƒ‰ (ê³µíœ´ì¼)
  success: '#4CAF50',      // ì„±ê³µ
  warning: '#FF9800',      // ê²½ê³ 
  error: '#F44336',        // ì˜¤ë¥˜
  text: '#333333',         // ê¸°ë³¸ í…ìŠ¤íŠ¸
  textLight: '#999999',    // ì—°í•œ í…ìŠ¤íŠ¸
};
```

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê°œë°œ ì™„ë£Œ í•­ëª©
- [x] ìº˜ë¦°ë” UI ë Œë”ë§
- [x] ë‚ ì§œ ì„ íƒ ê¸°ëŠ¥
- [x] ë¬¼ì£¼ê¸° ì¼ì • ë“±ë¡ (ë°˜ë³µ ì§€ì›)
- [x] ì¼ê¸° ì‘ì„± (ë‚ ì”¨ í¬í•¨)
- [x] ê³µíœ´ì¼ ìë™ í‘œì‹œ
- [x] ì¼ì • ì‹œê°í™” (ì  í‘œì‹œ)
- [x] ì¼ì •/ì¼ê¸° ì‚­ì œ ê¸°ëŠ¥
- [x] JSON Parse ì—ëŸ¬ ì²˜ë¦¬
- [x] ì™¸ë˜í‚¤ ì—ëŸ¬ ì²˜ë¦¬
- [x] í™•ì¸ ëŒ€í™”ìƒì

### ì§„í–‰ ì¤‘ í•­ëª©
- [ ] ì‚¬ìš©ìë³„ memId ì—°ë™
- [ ] ì¼ì • ìˆ˜ì • ê¸°ëŠ¥

### ë¯¸ì°©ìˆ˜ í•­ëª©
- [ ] ì¼ê¸° ìƒì„¸ë³´ê¸°
- [ ] ì•Œë¦¼ ê¸°ëŠ¥
- [ ] í†µê³„ ë° ë¶„ì„
- [ ] ê³µìœ  ê¸°ëŠ¥
- [ ] ì˜¤í”„ë¼ì¸ ì§€ì›
- [ ] ì‚¬ì§„ ì²¨ë¶€ ê¸°ëŠ¥

---

**ì‘ì„±ì¼**: 2025ë…„ 10ì›” 29ì¼  
**ì‘ì„±ì**: GitHub Copilot  
**ë²„ì „**: 1.0.0  
**ìµœì¢… ìˆ˜ì •**: ì‚­ì œ ê¸°ëŠ¥ ì™„ë£Œ ë° import ì˜¤ë¥˜ ìˆ˜ì •
