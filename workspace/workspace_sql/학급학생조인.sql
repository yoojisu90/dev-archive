
#외래키(Foreign Key)
#테이블 간의 관계 표현에 사용. 다른 테이블의 기본키를 참조 함!

DROP TABLE QNA_BOARD;
DROP TABLE REPLY;

#게시판 테이블
CREATE TABLE QNA_BOARD(
	BOARD_NUM INT PRIMARY KEY,
	TITLE VARCHAR(20),
	CONTENT VARCHAR(20),
	WRITER VARCHAR(20)
);

#댓글 테이블
CREATE TABLE REPLY(
	REPLY_NUM INT PRIMARY KEY,
	REPLY_CONTENT VARCHAR(20),
	REPLY_WRITER VARCHAR(20),
	BOARD_NUM INT REFERENCES QNA_BOARD (BOARD_NUM) ON DELETE CASCADE
);

INSERT INTO QNA_BOARD VALUES (1,'AA','AA 내용','김');
INSERT INTO QNA_BOARD VALUES (2,'BB','BB 내용','이');
INSERT INTO QNA_BOARD VALUES (3,'CC','CC 내용','박');

INSERT INTO REPLY VALUES (1,'11', '김', 1);
INSERT INTO REPLY VALUES (2,'22', '이', 1);
INSERT INTO REPLY VALUES (3,'33', '김', 2);

DELETE FROM qna_board
WHERE BOARD_NUM = 1;

SELECT * FROM reply;

INSERT INTO REPLY VALUES (4,'44', '윤', 5);




# 연습용 테이블
#1. 학급 정보
CREATE TABLE CLASS_INFO(
	CLASS_NUM INT PRIMARY KEY, 				 #학급번호
	CLASS_NAME VARCHAR(20) NOT NULL UNIQUE  #학급명
);

#2. 학생 정보
CREATE TABLE STUDENT_INFO(
	STU_NUM INT PRIMARY KEY AUTO_INCREMENT,
	STU_NAME VARCHAR(20) NOT NULL,
	STU_AGE INT,
	CLASS_NUM INT REFERENCES CLASS_INFO (CLASS_NUM)
);

INSERT INTO CLASS_INFO VALUES(1, '자바반');
INSERT INTO CLASS_INFO VALUES(2, '영상반');
INSERT INTO CLASS_INFO VALUES(3, '디자인반');

INSERT INTO STUDENT_INFO VALUES(1, '김자바', 20, 1);
INSERT INTO STUDENT_INFO VALUES(2, '윤자바', 30, 1);
INSERT INTO STUDENT_INFO VALUES(3, '정자바', 40, 1);

INSERT INTO STUDENT_INFO VALUES(4, '김영상', 20, 2);
INSERT INTO STUDENT_INFO VALUES(5, '윤영상', 30, 2);
INSERT INTO STUDENT_INFO VALUES(6, '정영상', 40, 2);

INSERT INTO STUDENT_INFO VALUES(7, '김디자인', 20, 3);
INSERT INTO STUDENT_INFO VALUES(8, '윤디자인', 30, 3);
INSERT INTO STUDENT_INFO VALUES(9, '정디자인', 40, 3);

COMMIT;

SELECT * FROM CLASS_INFO;
SELECT * FROM STUDENT_INFO;

SELECT
   STU_NUM,
   STU_NAME,
   STU_AGE,
   CLASS_NAME
FROM STUDENT_INFO S INNER JOIN CLASS_INFO C
ON S.CLASS_NUM = C.CLASS_NUM;